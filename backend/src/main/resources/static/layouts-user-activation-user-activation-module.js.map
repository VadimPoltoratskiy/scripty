{"version":3,"sources":["webpack:///./src/app/layouts/user-activation/reg-confirm/reg-confirm.component.html","webpack:///./src/app/layouts/user-activation/reg-confirm/reg-confirm.component.scss","webpack:///./src/app/layouts/user-activation/reg-confirm/reg-confirm.component.ts","webpack:///./src/app/layouts/user-activation/resend-email/resend-email.component.html","webpack:///./src/app/layouts/user-activation/resend-email/resend-email.component.scss","webpack:///./src/app/layouts/user-activation/resend-email/resend-email.component.ts","webpack:///./src/app/layouts/user-activation/user-activation.component.html","webpack:///./src/app/layouts/user-activation/user-activation.component.scss","webpack:///./src/app/layouts/user-activation/user-activation.component.ts","webpack:///./src/app/layouts/user-activation/user-activation.module.ts","webpack:///./src/app/layouts/user-activation/user-activation.service.ts"],"names":[],"mappings":";;;;;;;;;AAAA,mB;;;;;;;;;;;ACAA,+DAA+D,2L;;;;;;;;;;;;;;;;;;;;;;;;;;ACAf;AACO;AACU;AAOjE;IAGI,6BAAoB,KAAqB,EACrB,MAAc,EACd,qBAA4C;QAF5C,UAAK,GAAL,KAAK,CAAgB;QACrB,WAAM,GAAN,MAAM,CAAQ;QACd,0BAAqB,GAArB,qBAAqB,CAAuB;IAChE,CAAC;IAED,sCAAQ,GAAR;QAAA,iBAOC;QANG,IAAI,CAAC,KAAK,CAAC,aAAa;aACnB,SAAS,CACN,UAAC,WAAW;YACR,KAAI,CAAC,KAAK,GAAG,WAAW,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YACtC,KAAI,CAAC,YAAY,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;IACf,CAAC;IAED,0CAAY,GAAZ,UAAa,KAAa;QAA1B,iBAaC;QAZG,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,KAAK,CAAC;aACzC,SAAS,CAAC;YACH,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QACpC,CAAC,EACD,UAAC,KAAK;YACF,IAAI,KAAK,CAAC,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,QAAQ,KAAK,YAAY,EAAE;gBAC/D,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;aAC/B;YACD,IAAI,KAAK,CAAC,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,QAAQ,KAAK,4CAA4C,EAAE;gBAC/F,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC;aACnD;QACL,CAAC,CAAC,CAAC;IACf,CAAC;IA9BQ,mBAAmB;QAL/B,+DAAS,CAAC;YACP,QAAQ,EAAE,iBAAiB;;;SAG9B,CAAC;yCAI6B,8DAAc;YACb,sDAAM;YACS,8EAAqB;OALvD,mBAAmB,CA+B/B;IAAD,0BAAC;CAAA;AA/B+B;;;;;;;;;;;;ACThC,2nB;;;;;;;;;;;ACAA,0BAA0B,sBAAsB,EAAE,YAAY,qBAAqB,mBAAmB,EAAE,+CAA+C,moB;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA7G;AACwB;AACD;AAC1B;AAOvC;IAGI,8BAAoB,qBAA4C,EAC5C,MAAc;QADd,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,WAAM,GAAN,MAAM,CAAQ;QAC9B,IAAI,CAAC,IAAI,GAAG,IAAI,wDAAS,CAAC;YACtB,KAAK,EAAE,IAAI,0DAAW,CAAC,IAAI,EAAE,CAAC,yDAAU,CAAC,QAAQ,EAAE,yDAAU,CAAC,KAAK,CAAC,CAAC;SACxE,CAAC,CAAC;IACP,CAAC;IAED,uCAAQ,GAAR;QAAA,iBAcC;QAbG,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC;aAC/D,SAAS,CACN,UAAC,QAAkB;YACf,IAAI,QAAQ,IAAI,QAAQ,CAAC,QAAQ,KAAK,yCAAyC,EAAE;gBAC7E,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;aACpC;iBAAM;gBACH,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;aACnC;QACL,CAAC,EACD,UAAC,KAAK;YACF,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACvB,CAAC,CACJ,CAAC;IACV,CAAC;IAxBQ,oBAAoB;QALhC,+DAAS,CAAC;YACT,QAAQ,EAAE,kBAAkB;;;SAG7B,CAAC;yCAI6C,8EAAqB;YACpC,sDAAM;OAJzB,oBAAoB,CAyBhC;IAAD,2BAAC;CAAA;AAzBgC;;;;;;;;;;;;ACVjC,kJ;;;;;;;;;;;ACAA,oCAAoC,gBAAgB,iBAAiB,sBAAsB,8BAA8B,EAAE,gBAAgB,mBAAmB,gBAAgB,qBAAqB,gBAAgB,EAAE,+CAA+C,+oC;;;;;;;;;;;;;;;;;;;;;;;;ACA1N;AAO1C;IACE;IAAgB,CAAC;IADN,uBAAuB;QALnC,+DAAS,CAAC;YACT,QAAQ,EAAE,sBAAsB;;;SAGjC,CAAC;;OACW,uBAAuB,CAEnC;IAAD,8BAAC;CAAA;AAFmC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPG;AACM;AACuB;AACf;AACmB;AACG;AACX;AACX;AAErD,IAAM,MAAM,GAAW;IACnB;QACI,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,kFAAuB,EAAE,QAAQ,EAAE;YACpD,EAAC,IAAI,EAAE,EAAE,EAAE,UAAU,EAAE,WAAW,EAAE,SAAS,EAAE,MAAM,EAAC;YACtD,EAAC,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,sFAAmB,EAAE,IAAI,EAAE,EAAC,KAAK,EAAE,2BAA2B,EAAC,EAAC;YAC7F,EAAC,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,yFAAoB,EAAE,IAAI,EAAE,EAAC,KAAK,EAAE,wBAAwB,EAAC,EAAC;SAC7F;KACJ;CACJ,CAAC;AAmBF;IAAA;IACA,CAAC;IADY,oBAAoB;QAjBhC,8DAAQ,CAAC;YACN,YAAY,EAAE;gBACV,kFAAuB;gBACvB,sFAAmB;gBACnB,yFAAoB;aACvB;YACD,OAAO,EAAE;gBACL,4DAAY;gBACZ,0DAAW;gBACX,kEAAmB;gBACnB,+DAAc;gBACd,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAChC;YACD,OAAO,EAAE;gBACL,4DAAY;aACf;SACJ,CAAC;OACW,oBAAoB,CAChC;IAAD,2BAAC;CAAA;AADgC;;;;;;;;;;;;;;;;;;;;;;;;;;ACpCU;AACK;AAKhD;IAEI,+BAAoB,UAAsB;QAAtB,eAAU,GAAV,UAAU,CAAY;IAAI,CAAC;IAE/C,4CAAY,GAAZ,UAAa,KAAa;QACtB,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,iCAAiC,GAAG,KAAK,CAAC,CAAC;IAC1E,CAAC;IAED,2CAAW,GAAX,UAAY,KAAa;QACrB,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,mCAAmC,EAAE;YAC7D,OAAO,EAAE,KAAK;SACjB,CAAC,CAAC;IACP,CAAC;IAZQ,qBAAqB;QAHjC,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;yCAGkC,+DAAU;OAFjC,qBAAqB,CAajC;IAAD,4BAAC;CAAA;AAbiC","file":"layouts-user-activation-user-activation-module.js","sourcesContent":["module.exports = \"\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2xheW91dHMvdXNlci1hY3RpdmF0aW9uL3JlZy1jb25maXJtL3JlZy1jb25maXJtLmNvbXBvbmVudC5zY3NzIn0= */\"","import {Component, OnInit} from '@angular/core';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {UserActivationService} from '../user-activation.service';\r\n\r\n@Component({\r\n    selector: 'app-reg-confirm',\r\n    templateUrl: './reg-confirm.component.html',\r\n    styleUrls: ['./reg-confirm.component.scss']\r\n})\r\nexport class RegConfirmComponent implements OnInit {\r\n    token: string;\r\n\r\n    constructor(private route: ActivatedRoute,\r\n                private router: Router,\r\n                private userActivationService: UserActivationService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.route.queryParamMap\r\n            .subscribe(\r\n                (queryParams) => {\r\n                    this.token = queryParams.get('token');\r\n                    this.activateUser(this.token);\r\n                });\r\n    }\r\n\r\n    activateUser(token: string) {\r\n        this.userActivationService.activateUser(token)\r\n            .subscribe(() => {\r\n                    this.router.navigate(['login']);\r\n                },\r\n                (error) => {\r\n                    if (error.status === 400 && error.error.response === 'Wrong link') {\r\n                        this.router.navigate(['/']);\r\n                    }\r\n                    if (error.status === 400 && error.error.response === 'Time of user verification link has expired') {\r\n                        this.router.navigate(['userActivation/resend']);\r\n                    }\r\n                });\r\n    }\r\n}\r\n","module.exports = \"<form class=\\\"form\\\" [formGroup]=\\\"form\\\">\\r\\n  <label for=\\\"emailInput\\\">Time of your verification link has expired.\\r\\n    Please enter email to resend:</label>\\r\\n  <div class=\\\"form-row\\\">\\r\\n    <input class=\\\"form-row__input\\\" id=\\\"emailInput\\\" type=\\\"email\\\" formControlName=\\\"email\\\">\\r\\n  </div>\\r\\n  <mat-error *ngIf=\\\"form.get('email').touched && form.get('email').invalid\\\">\\r\\n    Enter correct email\\r\\n  </mat-error>\\r\\n  <button mat-raised-button\\r\\n          type=\\\"button\\\"\\r\\n          (click)=\\\"onSubmit()\\\"\\r\\n          [disabled]=\\\"form.invalid || form.pristine\\\">Send\\r\\n  </button>\\r\\n</form>\"","module.exports = \".title {\\n  line-height: 25px; }\\n\\nbutton {\\n  margin-top: 10px;\\n  display: block; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbGF5b3V0cy91c2VyLWFjdGl2YXRpb24vcmVzZW5kLWVtYWlsL0Q6XFxQcm9ncmFtbWluZ1xcSmF2YVxcc2NyaXB0eVxcZnJvbnRlbmQvc3JjXFxhcHBcXGxheW91dHNcXHVzZXItYWN0aXZhdGlvblxccmVzZW5kLWVtYWlsXFxyZXNlbmQtZW1haWwuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBaUIsRUFDbEI7O0FBQ0Q7RUFDRSxpQkFBZ0I7RUFDaEIsZUFBYyxFQUNmIiwiZmlsZSI6InNyYy9hcHAvbGF5b3V0cy91c2VyLWFjdGl2YXRpb24vcmVzZW5kLWVtYWlsL3Jlc2VuZC1lbWFpbC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50aXRsZSB7XHJcbiAgbGluZS1oZWlnaHQ6IDI1cHg7XHJcbn1cclxuYnV0dG9uIHtcclxuICBtYXJnaW4tdG9wOiAxMHB4O1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG59Il19 */\"","import { Component } from '@angular/core';\r\nimport {FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {UserActivationService} from '../user-activation.service';\r\nimport {Router} from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-resend-email',\r\n  templateUrl: './resend-email.component.html',\r\n  styleUrls: ['./resend-email.component.scss']\r\n})\r\nexport class ResendEmailComponent {\r\n    form: FormGroup;\r\n\r\n    constructor(private userActivationService: UserActivationService,\r\n                private router: Router) {\r\n        this.form = new FormGroup({\r\n            email: new FormControl(null, [Validators.required, Validators.email])\r\n        });\r\n    }\r\n\r\n    onSubmit() {\r\n        this.userActivationService.resendEmail(this.form.get('email').value)\r\n            .subscribe(\r\n                (response: Response) => {\r\n                    if (response && response.response === 'Please complete the registration first!') {\r\n                        this.router.navigate(['signup']);\r\n                    } else {\r\n                        this.router.navigate(['login']);\r\n                    }\r\n                },\r\n                (error) => {\r\n                    console.log(error);\r\n                }\r\n            );\r\n    }\r\n}\r\n\r\nexport interface Response {\r\n    response: string;\r\n}\r\n","module.exports = \"<div class=\\\"user-activation\\\">\\r\\n  <div class=\\\"main-part\\\">\\r\\n    <router-outlet></router-outlet>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \".user-activation {\\n  width: 100%;\\n  height: 100%;\\n  padding-top: 15px;\\n  background-color: #1f252d; }\\n\\n.main-part {\\n  margin: 0 auto;\\n  width: 100%;\\n  max-width: 300px;\\n  color: #fff; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbGF5b3V0cy91c2VyLWFjdGl2YXRpb24vRDpcXFByb2dyYW1taW5nXFxKYXZhXFxzY3JpcHR5XFxmcm9udGVuZC9zcmNcXGFwcFxcbGF5b3V0c1xcdXNlci1hY3RpdmF0aW9uXFx1c2VyLWFjdGl2YXRpb24uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2xheW91dHMvdXNlci1hY3RpdmF0aW9uL0Q6XFxQcm9ncmFtbWluZ1xcSmF2YVxcc2NyaXB0eVxcZnJvbnRlbmQvc3JjXFxhc3NldHNcXHNjc3NcXF92YXJpYWJsZXMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLFlBQVc7RUFDWCxhQUFZO0VBQ1osa0JBQWlCO0VBQ2pCLDBCQ0xxQixFRE10Qjs7QUFDRDtFQUNFLGVBQWM7RUFDZCxZQUFXO0VBQ1gsaUJBQWdCO0VBQ2hCLFlBQVcsRUFDWiIsImZpbGUiOiJzcmMvYXBwL2xheW91dHMvdXNlci1hY3RpdmF0aW9uL3VzZXItYWN0aXZhdGlvbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJ2YXJpYWJsZXNcIjtcclxuLnVzZXItYWN0aXZhdGlvbiB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHBhZGRpbmctdG9wOiAxNXB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICRwcmltYXJ5LWNvbG9yO1xyXG59XHJcbi5tYWluLXBhcnQge1xyXG4gIG1hcmdpbjogMCBhdXRvO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIG1heC13aWR0aDogMzAwcHg7XHJcbiAgY29sb3I6ICNmZmY7XHJcbn0iLCIkcHJpbWFyeS1jb2xvcjogIzFmMjUyZDtcclxuJHNlY29uZGFyeS1jb2xvcjogIzFiMjAyNztcclxuJGJvcmRlci1jb2xvcjogIzJjMzIzYTtcclxuJGhvdmVyLWNvbG9yOiAjMGY4NGZkOyJdfQ== */\"","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-reg-confirmation',\r\n  templateUrl: './user-activation.component.html',\r\n  styleUrls: ['./user-activation.component.scss']\r\n})\r\nexport class UserActivationComponent {\r\n  constructor() { }\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {UserActivationComponent} from './user-activation.component';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {RegConfirmComponent} from './reg-confirm/reg-confirm.component';\r\nimport {ResendEmailComponent} from './resend-email/resend-email.component';\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\nimport {MaterialModule} from '../../material-module';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '', component: UserActivationComponent, children: [\r\n            {path: '', redirectTo: '/projects', pathMatch: 'full'},\r\n            {path: 'confirm', component: RegConfirmComponent, data: {title: 'Registration confirmation'}},\r\n            {path: 'resend', component: ResendEmailComponent, data: {title: 'Resend activation link'}}\r\n        ]\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    declarations: [\r\n        UserActivationComponent,\r\n        RegConfirmComponent,\r\n        ResendEmailComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MaterialModule,\r\n        RouterModule.forChild(routes)\r\n    ],\r\n    exports: [\r\n        RouterModule\r\n    ]\r\n})\r\nexport class UserActivationModule {\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserActivationService {\r\n\r\n    constructor(private httpClient: HttpClient) { }\r\n\r\n    activateUser(token: string) {\r\n        return this.httpClient.get('/api/registrationConfirm?token=' + token);\r\n    }\r\n\r\n    resendEmail(email: string) {\r\n        return this.httpClient.post('/api/user/resendRegistrationToken', {\r\n            'email': email\r\n        });\r\n    }\r\n}\r\n"],"sourceRoot":""}